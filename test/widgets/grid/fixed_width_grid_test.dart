import 'package:ansix/ansix.dart';
import 'package:test/test.dart';

void main() {
  final List<List<dynamic>> data = <List<dynamic>>[
    <dynamic>['Name', AnsiColor.red.name, AnsiColor.green.name, AnsiColor.blue.name],
    <dynamic>['Hex', AnsiColor.red.hex, AnsiColor.green.hex, AnsiColor.blue.hex],
    <dynamic>['RGB', AnsiColor.red.rgb, AnsiColor.green.rgb, AnsiColor.blue.rgb],
  ];

  for (final AnsiBorderType type in AnsiBorderType.values) {
    group(type.name, () {
      test('AnsiGrid', () {
        final AnsiGrid grid = AnsiGrid.fromColumns(
          data,
          theme: AnsiGridTheme(
            fixedCellWidth: 15,
            transparent: true,
            border: AnsiBorder(
              style: AnsiBorderStyle.square,
              type: type,
            ),
          ),
        );

        expect(grid.toString(), mocks[type]);
      });
    });
  }

  test('non-transparent', () {
    final AnsiGrid grid = AnsiGrid.fromColumns(
      data,
      theme: const AnsiGridTheme(
        fixedCellWidth: 15,
        transparent: false,
        border: AnsiBorder(
          style: AnsiBorderStyle.square,
          type: AnsiBorderType.all,
        ),
      ),
    );

    final String actual = 'this is a grid\n${grid.formattedText}';
    expect(actual.withForegroundColor(AnsiColor.indianRed), nonTransparentGridMock);
  });

  test('non-transparent with colored borders', () {
    final AnsiGrid grid = AnsiGrid.fromColumns(
      data,
      theme: const AnsiGridTheme(
        transparent: false,
        fixedCellWidth: 15,
        border: AnsiBorder(
          style: AnsiBorderStyle.square,
          type: AnsiBorderType.all,
          color: AnsiColor.cadetBlue,
        ),
      ),
    );

    expect(grid.formattedText, nonTransparentGridWithColoredBordersMock);
  });
}

final Map<AnsiBorderType, String> mocks = <AnsiBorderType, String>{
  AnsiBorderType.all: allBorderGridMock,
  AnsiBorderType.inside: insideBorderGridMock,
  AnsiBorderType.insideHorizontal: insideHorizontalBorderGridMock,
  AnsiBorderType.insideVertical: insideVerticalBorderGridMock,
  AnsiBorderType.none: noBorderGridMock,
  AnsiBorderType.outside: outsideBorderGridMock,
  AnsiBorderType.outsideHorizontal: outsideHorizontalBorderGridMock,
  AnsiBorderType.outsideVertical: outsideVerticalBorderGridMock,
};

const String allBorderGridMock = '''
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Name           â”‚Hex            â”‚RGB            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚Red            â”‚#ff0000        â”‚(255, 0, 0)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚Green          â”‚#008000        â”‚(0, 128, 0)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚Blue           â”‚#0000ff        â”‚(0, 0, 255)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜''';

const String headerBorderGridMock = '''
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Name           â”‚Hex            â”‚RGB            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Red             #ff0000         (255, 0, 0)     
 Green           #008000         (0, 128, 0)     
 Blue            #0000ff         (0, 0, 255)     ''';

const String insideBorderGridMock = '''
Name           â”‚Hex            â”‚RGB            
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Red            â”‚#ff0000        â”‚(255, 0, 0)    
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Green          â”‚#008000        â”‚(0, 128, 0)    
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Blue           â”‚#0000ff        â”‚(0, 0, 255)    ''';

const String insideHorizontalBorderGridMock = '''
Name            Hex             RGB            
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Red             #ff0000         (255, 0, 0)    
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Green           #008000         (0, 128, 0)    
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Blue            #0000ff         (0, 0, 255)    ''';

const String insideVerticalBorderGridMock = '''
Name           â”‚Hex            â”‚RGB            
Red            â”‚#ff0000        â”‚(255, 0, 0)    
Green          â”‚#008000        â”‚(0, 128, 0)    
Blue           â”‚#0000ff        â”‚(0, 0, 255)    ''';

const String noBorderGridMock = '''
Name           Hex            RGB            
Red            #ff0000        (255, 0, 0)    
Green          #008000        (0, 128, 0)    
Blue           #0000ff        (0, 0, 255)    ''';

const String outsideBorderGridMock = '''
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Name           Hex            RGB            â”‚
â”‚Red            #ff0000        (255, 0, 0)    â”‚
â”‚Green          #008000        (0, 128, 0)    â”‚
â”‚Blue           #0000ff        (0, 0, 255)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜''';

const String outsideVerticalBorderGridMock = '''
â”‚Name            Hex             RGB            â”‚
â”‚Red             #ff0000         (255, 0, 0)    â”‚
â”‚Green           #008000         (0, 128, 0)    â”‚
â”‚Blue            #0000ff         (0, 0, 255)    â”‚''';

const String outsideHorizontalBorderGridMock = '''
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Name           Hex            RGB            
Red            #ff0000        (255, 0, 0)    
Green          #008000        (0, 128, 0)    
Blue           #0000ff        (0, 0, 255)    
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€''';

const String headerFooterBorderGridMock = '''
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Name           â”‚Hex            â”‚RGB            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Red             #ff0000         (255, 0, 0)     
 Green           #008000         (0, 128, 0)     
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Blue           â”‚#0000ff        â”‚(0, 0, 255)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜''';

const String footerBorderGridMock = '''
 Name            Hex             RGB             
 Red             #ff0000         (255, 0, 0)     
 Green           #008000         (0, 128, 0)     
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Blue           â”‚#0000ff        â”‚(0, 0, 255)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜''';

const String nonTransparentGridMock = '''
\x1B[38;5;131mthis is a grid
\x1B[0mâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
\x1B[0mâ”‚Name           â”‚Hex            â”‚RGB            â”‚
\x1B[0mâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
\x1B[0mâ”‚Red            â”‚#ff0000        â”‚(255, 0, 0)    â”‚
\x1B[0mâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
\x1B[0mâ”‚Green          â”‚#008000        â”‚(0, 128, 0)    â”‚
\x1B[0mâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
\x1B[0mâ”‚Blue           â”‚#0000ff        â”‚(0, 0, 255)    â”‚
\x1B[0mâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\x1B[0m''';

const String nonTransparentGridWithColoredBordersMock =
    '''[0m[38;5;72mâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”[0m
[0m[38;5;72mâ”‚[0mName           [38;5;72mâ”‚[0mHex            [38;5;72mâ”‚[0mRGB            [38;5;72mâ”‚[0m
[0m[38;5;72mâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤[0m
[0m[38;5;72mâ”‚[0mRed            [38;5;72mâ”‚[0m#ff0000        [38;5;72mâ”‚[0m(255, 0, 0)    [38;5;72mâ”‚[0m
[0m[38;5;72mâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤[0m
[0m[38;5;72mâ”‚[0mGreen          [38;5;72mâ”‚[0m#008000        [38;5;72mâ”‚[0m(0, 128, 0)    [38;5;72mâ”‚[0m
[0m[38;5;72mâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤[0m
[0m[38;5;72mâ”‚[0mBlue           [38;5;72mâ”‚[0m#0000ff        [38;5;72mâ”‚[0m(0, 0, 255)    [38;5;72mâ”‚[0m
[0m[38;5;72mâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜[0m''';
